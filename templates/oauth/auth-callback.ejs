<!DOCTYPE html>
<html lang="en">
<head>
    <title>Authentication <%= error ? 'Failed' : 'Success' %></title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
</head>
<body>
<script type="text/javascript">
    var session = <%- JSON.stringify(session) %>;
    var error = <%- JSON.stringify(error) %>;
    var link = <%- JSON.stringify(link) %>;
    
    // Redirect back to the main application with the auth data
    const redirectUrl = new URL(link || window.location.origin);
    if (error) {
        redirectUrl.searchParams.set('auth_error', JSON.stringify(error));
    } else if (session) {
        redirectUrl.searchParams.set('auth_session', JSON.stringify(session));
    }
    
    window.location.href = redirectUrl.toString();
</script>
</body>
</html></html>
